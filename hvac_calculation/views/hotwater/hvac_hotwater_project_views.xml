<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="hvac_hotwater_project_list" model="ir.ui.view">
        <field name="name">hvac.hotwater.project.list</field>
        <field name="model">hvac.hotwater.project</field>
        <field name="arch" type="xml">
            <list decoration-info="state == 'draft'" decoration-success="state == 'confirmed'" decoration-primary="state == 'quoted'">
                <field name="offer_code"/>
                <field name="name"/>
                <field name="customer_id"/>
                <field name="date"/>
                <field name="total_demand_liters"/>
                <field name="total_pool_volume"/>
                <field name="grand_total"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <record id="hvac_hotwater_project_form" model="ir.ui.view">
        <field name="name">hvac.hotwater.project.form</field>
        <field name="model">hvac.hotwater.project</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_confirm" string="Confirm" type="object" class="btn-primary" invisible="state != 'draft'"/>
                    <button name="action_create_quotation" string="Create Quotation" type="object" class="btn-primary" invisible="state != 'confirmed'"/>
                    <button name="action_view_quotation" string="View Quotation" type="object" invisible="not sale_order_id"/>
                    <button name="action_done" string="Done" type="object" invisible="state != 'quoted'"/>
                    <button name="action_cancel" string="Cancel" type="object" invisible="state in ('done', 'cancelled')"/>
                    <button name="action_draft" string="Reset to Draft" type="object" invisible="state != 'cancelled'"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,quoted,done"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1><field name="offer_code" readonly="1"/></h1>
                    </div>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="customer_id"/>
                            <field name="attention_to"/>
                        </group>
                        <group>
                            <field name="date"/>
                            <field name="validity_days"/>
                            <field name="company_id" invisible="1"/>
                            <field name="currency_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Usage Points">
                            <field name="space_ids">
                                <list editable="bottom">
                                    <field name="space_type"/>
                                    <field name="name"/>
                                    <field name="qty"/>
                                    <field name="shower_count" optional="show"/>
                                    <field name="bathtub_count" optional="show"/>
                                    <field name="sink_count" optional="show"/>
                                    <field name="demand_liters_per_day" sum="Total L/day"/>
                                    <field name="pool_length" optional="hide"/>
                                    <field name="pool_width" optional="hide"/>
                                    <field name="pool_depth" optional="hide"/>
                                    <field name="pool_volume" optional="show"/>
                                    <field name="pool_heating_load_kw" optional="show"/>
                                    <field name="heater_id"/>
                                    <field name="pool_heater_id"/>
                                    <field name="space_subtotal" string="Subtotal" sum="Total"/>
                                </list>
                            </field>
                            <group class="mt-3">
                                <group>
                                    <field name="total_demand_liters"/>
                                    <field name="total_peak_flow"/>
                                    <field name="total_pool_volume"/>
                                    <field name="total_pool_heating_kw"/>
                                </group>
                            </group>
                        </page>
                        <page string="Additional Equipment">
                            <field name="equipment_line_ids">
                                <list editable="bottom">
                                    <field name="sequence" widget="handle"/>
                                    <field name="name"/>
                                    <field name="equipment_id"/>
                                    <field name="unit"/>
                                    <field name="quantity"/>
                                    <field name="unit_price"/>
                                    <field name="subtotal" sum="Total"/>
                                </list>
                            </field>
                        </page>
                        <page string="Pricing">
                            <group>
                                <group string="Equipment">
                                    <field name="heater_total"/>
                                    <field name="pool_heater_total"/>
                                    <field name="equipment_line_total"/>
                                    <field name="equipment_subtotal"/>
                                    <field name="equipment_discount"/>
                                    <field name="equipment_total"/>
                                </group>
                                <group>
                                    <field name="grand_total" class="oe_subtotal_footer_separator"/>
                                </group>
                            </group>
                        </page>
                        <page string="Terms &amp; Conditions">
                            <group><field name="terms_template_id"/></group>
                            <group><field name="offer_includes"/></group>
                            <group><field name="offer_excludes"/></group>
                            <group><field name="payment_terms"/></group>
                            <group><field name="execution_time"/></group>
                            <group><field name="warranty"/></group>
                            <group><field name="additional_notes"/></group>
                        </page>
                    </notebook>
                    <field name="sale_order_id" invisible="1"/>
                </sheet>
            </form>
        </field>
    </record>

    <record id="hvac_hotwater_project_search" model="ir.ui.view">
        <field name="name">hvac.hotwater.project.search</field>
        <field name="model">hvac.hotwater.project</field>
        <field name="arch" type="xml">
            <search string="Search Hot Water Projects">
                <field name="name"/>
                <field name="offer_code"/>
                <field name="customer_id"/>
                <filter name="filter_draft" string="Draft" domain="[('state', '=', 'draft')]"/>
                <filter name="filter_confirmed" string="Confirmed" domain="[('state', '=', 'confirmed')]"/>
            </search>
        </field>
    </record>

    <record id="action_hvac_hotwater_project" model="ir.actions.act_window">
        <field name="name">Hot Water Projects</field>
        <field name="res_model">hvac.hotwater.project</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="seq_hvac_hotwater_project" model="ir.sequence">
        <field name="name">Hot Water Project Sequence</field>
        <field name="code">hvac.hotwater.project</field>
        <field name="prefix">HW/%(year)s/</field>
        <field name="padding">4</field>
    </record>

</odoo>
